# LangGraph Parser 설정 파일
# 명세서 기반 3GPP Final Minutes Report 파서 구성

# LLM 설정 (OpenRouter + Gemini)
llm:
  provider: "openrouter"
  model: "google/gemini-2.0-flash-001"
  max_tokens: 16384
  temperature: 0
  base_url: "https://openrouter.ai/api/v1"
  # API 키는 .env 파일에서 OPENROUTER_API_KEY로 관리

# 파일 경로 설정
paths:
  # 입력: Phase-1에서 변환된 DOCX 파일 위치
  input_base: "data/data_extracted/meetings/RAN1"
  # 출력: 파싱 결과 YAML 파일 위치
  output_base: "output/phase-2/langgraph-parser/results"
  # 중간 파일: pandoc 변환된 Markdown 파일 위치
  converted_base: "output/phase-2/langgraph-parser/converted"

# 처리 설정
processing:
  # 대용량 처리 청크 크기 (토큰 기준)
  chunk_size: 50000
  # 섹션 병렬 처리 여부 (MVP에서는 순차 처리 권장)
  parallel_sections: false
  # 최대 재시도 횟수
  max_retries: 3
  # 타임아웃 (초) - Section 9 등 대용량 섹션 처리를 위해 30분으로 설정
  timeout: 1800

# 역할별 설정
roles:
  # 역할 0: 전처리
  preprocess:
    enabled: true
    pandoc_format: "markdown"

  # 역할 1: 메타데이터 추출
  metadata:
    enabled: true

  # 역할 2: TOC 파싱
  toc:
    enabled: true

  # 역할 3: 섹션 처리
  sections:
    enabled: true
    # skip 처리할 section_type
    skip_types:
      - "Procedural"

  # 역할 4: 검증
  validation:
    enabled: true
    # 크로스체크 활성화
    crosscheck_enabled: true

# 로깅 설정
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/phase-2/langgraph-parser/parser.log"

# Human Review 설정
human_review:
  # unknown type 발생 시 Human Review 트리거
  trigger_on_unknown: true
  # 신뢰도 임계값 (이하면 Human Review)
  confidence_threshold: 0.7
  # Human Review 출력 위치
  output_dir: "output/phase-2/langgraph-parser/human_review"
